# 文件传输

PureSend 提供快速、安全的文件传输功能，支持多种传输模式。

## 工作原理

PureSend 支持三种传输模式：

### P2P 直连传输

1. **设备发现**: 通过 mDNS 协议自动发现局域网中的其他 PureSend 设备
2. **建立连接**: 通过设备 IP 和端口建立直接的 HTTP 连接
3. **安全握手**: 使用 P-256 ECDH 密钥交换建立加密通道（可选）
4. **传输数据**: 文件自动分块传输，支持加密和压缩

### Web 下载（链接分享）

1. 发送方启动 HTTP 服务器并分享文件
2. 生成下载链接和二维码
3. 接收方在任意浏览器中打开链接即可下载
4. 支持 PIN 码保护和访问审批

### Web 上传

1. 接收方启动 HTTP 上传服务器
2. 生成上传链接和二维码
3. 发送方在浏览器中打开链接上传文件
4. 支持按 IP 审批和分块上传

## 功能特性

### 多内容类型支持

- **文件**: 选择任意类型的文件进行传输
- **文件夹**: 选择整个文件夹批量传输
- **剪贴板**: 直接传输剪贴板中的内容
- **文本**: 快速发送文本消息
- **媒体**: 从媒体库选择图片/视频
- **应用**: 分享已安装的应用（Android）

### 传输能力

- **断点续传**: 传输中断后可从断点恢复，无需重新传输
- **分块传输**: 大文件自动分块（1MB/块），支持并行处理
- **动态压缩**: 基于 zstd 算法的智能压缩，自动判断是否压缩以优化速度
- **传输速度**: 局域网内可达 100Mbps+

### 设备发现

- **mDNS 自动发现**: 自动发现同一局域网中运行 PureSend 的设备
- **手动添加**: 支持通过 IP 地址手动添加设备

## 安全性

### 传输加密

- **AES-256-GCM** 端到端加密保护传输数据
- **P-256 ECDH** 密钥交换（HTTP 传输模式，兼容浏览器 Web Crypto API）
- **X25519** 密钥交换（P2P 传输模式）
- 可在设置中开启/关闭加密

### 访问控制

- **PIN 保护**: Web 下载链接可设置 PIN 码
- **访问审批**: 支持手动审批或自动接受传输请求
- **IP 审批**: Web 上传模式支持按 IP 地址审批

### 隐私保护

- 文件数据仅在局域网内或 Wi-Fi 直连传输
- 不经过任何外部服务器或云端中转
- 支持隐私模式，关闭传输历史记录

## 传输历史

- 自动记录每次传输的详细信息（方向、状态、文件列表、耗时等）
- 支持按方向（发送/接收）和状态（完成/失败等）筛选
- 支持按时间、大小等排序
- 隐私模式下可禁用历史记录

## 使用技巧

### 提高传输速度

1. 确保设备在同一局域网
2. 关闭 VPN 和代理
3. 使用 5GHz WiFi 网络
4. 开启动态压缩（对文本类文件效果明显）

### 跨平台传输

支持任意平台之间的文件传输：

- macOS ↔ Windows
- Linux ↔ Android
- 桌面端 ↔ 移动端
- 任意设备 ↔ 浏览器（通过 Web 下载/上传）
